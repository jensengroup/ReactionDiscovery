#!/bin/sh
#SBATCH --job-name=split_trajectory
#SBATCH --nodes=1
#SBATCH --cpus-per-task=1
#SBATCH --mem=3GB
#SBATCH --error=/home/mariaharris/github/ReactionDiscovery/metadynamics_search/metadynamics/0.8_0.05_0.3/run2/split_trajectory\_%j.stderr
#SBATCH --output=/home/mariaharris/github/ReactionDiscovery/metadynamics_search/metadynamics/0.8_0.05_0.3/run2/split_trajectory\_%j.stdout
#SBATCH --ntasks=1
#SBATCH --time=100:00:00
#SBATCH --partition=mko
#SBATCH --no-requeue

# Create scratch folder
mkdir /scratch/$SLURM_JOB_ID
cd /scratch/$SLURM_JOB_ID

cp /home/mariaharris/github/ReactionDiscovery/metadynamics_search/metadynamics/0.8_0.05_0.3/run2/xtb.trj .

ulimit -s unlimited
export OMP_STACKSIZE=3GB

(/home/mariaharris/github/ReactionDiscovery/metadynamics_search/split_trajectory.py xtb.trj 10 0 list_file.p)

cp -r analyze_trajectory /home/mariaharris/github/ReactionDiscovery/metadynamics_search/metadynamics/0.8_0.05_0.3/run2
cp list_file.p /home/mariaharris/github/ReactionDiscovery/metadynamics_search/metadynamics/0.8_0.05_0.3/run2

rm -rf /scratch/$SLURM_JOB_ID

